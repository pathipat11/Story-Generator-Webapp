{% extends "base.html" %}
{% block content %}
<section class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm dark:border-slate-800 dark:bg-slate-900">
    <div class="flex items-center justify-between">
        <h2 class="text-base font-semibold">Create story</h2>
        <label class="inline-flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300">
            <input id="wantImgPrompt" type="checkbox" checked
                class="h-4 w-4 rounded border-slate-300 dark:border-slate-700 dark:bg-slate-950" />
            Illustration prompt
        </label>
    </div>

    <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
        <div>
            <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Genre</label>
            <select id="genre"
                class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950 dark:focus:ring-slate-700">
                <option value="fantasy">แฟนตาซี</option>
                <option value="adventure">ผจญภัย</option>
                <option value="detective">สืบสวน</option>
                <option value="slice">ชีวิตประจำวัน</option>
                <option value="bedtime">นิทานก่อนนอน</option>
            </select>
        </div>

        <div>
            <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Tone</label>
            <select id="tone"
                class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950 dark:focus:ring-slate-700">
                <option value="warm">อบอุ่น</option>
                <option value="funny">ตลก</option>
                <option value="mystery">ลึกลับ</option>
                <option value="dark_soft">ดาร์กแบบเบา</option>
            </select>
        </div>

        <div>
            <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Target age</label>
            <select id="age"
                class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950 dark:focus:ring-slate-700">
                <option value="kids">เด็กเล็ก</option>
                <option value="preteens">เด็กโต</option>
                <option value="teens">วัยรุ่น</option>
                <option value="adult">ผู้ใหญ่</option>
            </select>
        </div>

        <div>
            <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Length</label>
            <select id="length"
                class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950 dark:focus:ring-slate-700">
                <option value="short">สั้น</option>
                <option value="medium">กลาง</option>
                <option value="long">ยาว</option>
            </select>
        </div>
    </div>

    <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
        <div>
            <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Setting</label>
            <input id="setting" value="หมู่บ้านเล็กๆใกล้ป่า"
                class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950 dark:focus:ring-slate-700" />
        </div>

        <div>
            <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Theme / Moral</label>
            <input id="theme" value="มิตรภาพและความพยายาม"
                class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-slate-300 dark:border-slate-800 dark:bg-slate-950 dark:focus:ring-slate-700" />
        </div>
    </div>

    <!-- Presets -->
    <div class="mt-5">
        <h3 class="text-sm font-semibold">Preset templates</h3>
        <div class="mt-2 flex flex-wrap gap-2">
            <button type="button" data-preset="bedtime"
                class="preset rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-200 dark:hover:bg-slate-900">
                นิทานก่อนนอน
            </button>
            <button type="button" data-preset="adventure"
                class="preset rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-200 dark:hover:bg-slate-900">
                ผจญภัย
            </button>
            <button type="button" data-preset="mystery"
                class="preset rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-200 dark:hover:bg-slate-900">
                สืบสวน
            </button>
            <button type="button" data-preset="slice"
                class="preset rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-200 dark:hover:bg-slate-900">
                ชีวิตประจำวัน
            </button>
        </div>
        <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">กดแล้วจะเติมค่า Genre/Tone/Setting/Theme
            และตัวละครตัวอย่างให้</p>
    </div>

    <!-- Outline -->
    <div class="mt-5">
        <div class="flex items-center justify-between">
            <h3 class="text-sm font-semibold">Outline (แนะนำให้สร้างก่อน)</h3>
            <button id="genOutline" type="button"
                class="rounded-xl bg-slate-900 px-3 py-2 text-sm font-semibold text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200">
                Generate outline
            </button>
        </div>

        <textarea id="outline" placeholder="(ยังไม่มี) กด Generate outline เพื่อให้ AI วางโครงเรื่องก่อน แล้วแก้เองได้"
            class="mt-2 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm dark:border-slate-800 dark:bg-slate-950"
            rows="6"></textarea>

        <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">
            เมื่อมี outline แล้ว ระบบจะใช้ outline นี้ตอน Generate story ทำให้คุมทิศทางเรื่องง่ายขึ้น
        </p>
    </div>

    <div class="mt-5">
        <div class="flex items-center justify-between">
            <h3 class="text-sm font-semibold">Characters</h3>
            <button id="addChar" type="button"
                class="rounded-xl bg-slate-900 px-3 py-2 text-sm font-medium text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200">
                + Add
            </button>
        </div>
        <div id="chars" class="mt-3 space-y-3"></div>
    </div>

    <div class="mt-4">
        <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Relationships (optional)</label>
        <textarea id="rels"
            class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm dark:border-slate-800 dark:bg-slate-950"
            rows="3"></textarea>
    </div>

    <div class="mt-4">
        <label class="text-xs font-medium text-slate-600 dark:text-slate-300">Story idea</label>
        <textarea id="idea"
            class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm dark:border-slate-800 dark:bg-slate-950"
            rows="6"></textarea>
    </div>

    <div class="mt-4 flex flex-wrap gap-2">
        <button id="gen" type="button"
            class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200">
            Generate
        </button>
        <span id="status" class="text-sm text-slate-500 dark:text-slate-400"></span>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script defer src="/static/create.js"></script>
{% endblock %}